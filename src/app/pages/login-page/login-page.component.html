<app-background-illustration></app-background-illustration>

<div class="home-modern">
  <div class="overlay-glass" [@fadeIn]>
    <h1 class="welcome-text">Welcome back!</h1>

    <form #loginForm="ngForm" (ngSubmit)="onSubmit(loginForm)">
      <input 
        type="email" 
        [(ngModel)]="email" 
        name="email" 
        placeholder="Email Address" 
        required 
        email
      />
      <input 
        type="password" 
        [(ngModel)]="password" 
        name="password" 
        placeholder="Password" 
        required
      />

      <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

      <div class="button-wrapper">
        <button type="submit" [disabled]="loginForm.invalid" class="btn login">
          Log In with Email
        </button>
      </div>
    </form>

    <a (click)="showForgotModal = true">Forgot password?</a>

    <h2 class="separator">Or</h2>
    <div class="google-button-container">
      <div id="g_id_signin"></div>
    </div>
  </div>

<div *ngIf="showForgotModal" class="modal-overlay">
  <div class="modal-box" [@fadeIn]>
    <h3>Reset Password</h3>
    <ng-container *ngIf="!forgotSuccessMessage; else successTemplate">
      <input type="email" [(ngModel)]="forgotEmail" placeholder="Enter your email" required />
      <div *ngIf="forgotErrorMessage" class="error-message">{{ forgotErrorMessage }}</div>
      <div class="modal-buttons">
        <button (click)="sendResetLink()">Send Reset Link</button>
        <button (click)="showForgotModal = false">Cancel</button>
      </div>
    </ng-container>
    <ng-template #successTemplate>
      <div class="success-message">{{ forgotSuccessMessage }}</div>
      <div class="modal-buttons" style="justify-content: center;">
        <button (click)="showForgotModal = false">Close</button>
      </div>
    </ng-template>
  </div>
</div>
</div>

